var autoComplete=function(){return function(e){if(document.querySelector){var t={selector:0,source:0,minChars:3,delay:150,offsetLeft:0,offsetTop:1,cache:1,menuClass:"",renderItem:function(e,t){t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var s=new RegExp("("+t.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+e+'">'+e.replace(s,"<b>$1</b>")+"</div>"},onSelect:function(e,t,s){}};for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);for(var c="object"==typeof t.selector?[t.selector]:document.querySelectorAll(t.selector),o=0;o<c.length;o++){var l=c[o],a=document.createElement("div");a.setAttribute("id","whiteArrowUp"),a.classList.add("white"),a.classList.add("closed"),a.classList.add("arrow-up"),l.sc=document.createElement("div"),l.sc.className="autocomplete-suggestions "+t.menuClass,l.autocompleteAttr=l.getAttribute("autocomplete"),l.setAttribute("autocomplete","off"),l.cache={},l.last_val="",l.updateSC=function(e,t){if(l.getBoundingClientRect(),!e&&(l.sc.style.display="block",document.getElementById("whiteArrowUp").classList.remove("closed"),l.sc.maxHeight||(l.sc.maxHeight=parseInt((window.getComputedStyle?getComputedStyle(l.sc,null):l.sc.currentStyle).maxHeight)),l.sc.suggestionHeight||(l.sc.suggestionHeight=l.sc.querySelector(".autocomplete-suggestion").offsetHeight),l.sc.suggestionHeight))if(t){var s=l.sc.scrollTop,c=t.getBoundingClientRect().top-l.sc.getBoundingClientRect().top;c+l.sc.suggestionHeight-l.sc.maxHeight>0?l.sc.scrollTop=c+l.sc.suggestionHeight+s-l.sc.maxHeight:c<0&&(l.sc.scrollTop=c+s)}else l.sc.scrollTop=0},u(window,"resize",l.updateSC),document.getElementById("searchContainer").appendChild(a),document.getElementById("searchContainer").appendChild(l.sc),d("autocomplete-suggestion","mouseleave",function(e){var t=l.sc.querySelector(".autocomplete-suggestion-link.selected"),s=l.sc.querySelector(".autocomplete-suggestion-link.selected");t&&setTimeout(function(){t.className=t.className.replace("selected","")},20),s&&setTimeout(function(){s.className=s.className.replace("selected","")},20)},l.sc),d("autocomplete-suggestion","mouseover",function(e){var t=l.sc.querySelector(".autocomplete-suggestion.selected"),s=l.sc.querySelector(".autocomplete-suggestion-link.selected");t&&(t.className=t.className.replace("selected","")),s&&(s.className=s.className.replace("selected","")),this.className+=" selected"},l.sc),d("autocomplete-suggestion-link","mouseleave",function(e){var t=l.sc.querySelector(".autocomplete-suggestion-link.selected"),s=l.sc.querySelector(".autocomplete-suggestion-link.selected");t&&setTimeout(function(){t.className=t.className.replace("selected","")},20),s&&setTimeout(function(){s.className=s.className.replace("selected","")},20)},l.sc),d("autocomplete-suggestion-link","mouseover",function(e){var t=l.sc.querySelector(".autocomplete-suggestion.selected"),s=l.sc.querySelector(".autocomplete-suggestion-link.selected");t&&(t.className=t.className.replace("selected","")),s&&(s.className=s.className.replace("selected","")),this.className+=" selected"},l.sc),d("autocomplete-suggestion","mousedown",function(e){if(i(this,"autocomplete-suggestion")){var s=this.getAttribute("data-val");l.value=s,t.onSelect(e,s,this),l.sc.style.display="none",document.getElementById("whiteArrowUp").classList.add("closed")}},l.sc),l.blurHandler=function(){try{var e=document.querySelector(".autocomplete-suggestions:hover")}catch(t){e=0}e?l!==document.activeElement&&setTimeout(function(){l.focus()},20):(l.last_val=l.value,l.sc.style.display="none",document.getElementById("whiteArrowUp").classList.add("closed"),setTimeout(function(){l.sc.style.display="none"},350))},u(l,"blur",l.blurHandler);var n=function(e){var s=l.value;if(l.cache[s]=e,e.length&&s.length>=t.minChars){for(var c="",o=0;o<e.length;o++)c+=t.renderItem(e[o],s);l.sc.innerHTML=c,l.updateSC(0),document.getElementById("whiteArrowUp").classList.remove("closed")}else l.sc.style.display="none"};l.keydownHandler=function(e){var s,c=window.event?e.keyCode:e.which;if((40==c||38==c)&&l.sc.innerHTML)return(o=l.sc.querySelector(".autocomplete-suggestion.selected"))?(s=40==c?o.nextSibling:o.previousSibling)?(o.className=o.className.replace("selected",""),s.className+=" selected",l.value=s.getAttribute("data-val")):(o.className=o.className.replace("selected",""),l.value=l.last_val,s=0):((s=40==c?l.sc.querySelector(".autocomplete-suggestion"):l.sc.childNodes[l.sc.childNodes.length-1]).className+=" selected",l.value=s.getAttribute("data-val")),l.updateSC(0,s),!1;if(27==c)l.value=l.last_val,l.sc.style.display="none";else if(13==c||9==c){var o;(o=l.sc.querySelector(".autocomplete-suggestion.selected"))&&"none"!=l.sc.style.display&&(t.onSelect(e,o.getAttribute("data-val"),o),setTimeout(function(){l.sc.style.display="none"},20))}},u(l,"keydown",l.keydownHandler),l.keyupHandler=function(e){var s=window.event?e.keyCode:e.which;if(!s||(s<35||s>40)&&13!=s&&27!=s){var c=l.value;if(c.length>=t.minChars){if(c!=l.last_val){if(l.last_val=c,clearTimeout(l.timer),t.cache){if(c in l.cache)return void n(l.cache[c]);for(var o=1;o<c.length-t.minChars;o++){var a=c.slice(0,c.length-o);if(a in l.cache&&!l.cache[a].length)return void n([])}}l.timer=setTimeout(function(){t.source(c,n)},t.delay)}}else l.last_val=c,l.sc.style.display="none",document.getElementById("whiteArrowUp").classList.add("closed")}},u(l,"keyup",l.keyupHandler),l.focusHandler=function(e){l.last_val="\n",l.keyupHandler(e)},t.minChars||u(l,"focus",l.focusHandler)}this.destroy=function(){for(var e=0;e<c.length;e++){var t=c[e];r(window,"resize",t.updateSC),r(t,"blur",t.blurHandler),r(t,"focus",t.focusHandler),r(t,"keydown",t.keydownHandler),r(t,"keyup",t.keyupHandler),t.autocompleteAttr?t.setAttribute("autocomplete",t.autocompleteAttr):t.removeAttribute("autocomplete"),document.body.removeChild(t.sc),t=null}}}function i(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}function u(e,t,s){e.attachEvent?e.attachEvent("on"+t,s):e.addEventListener(t,s)}function r(e,t,s){e.detachEvent?e.detachEvent("on"+t,s):e.removeEventListener(t,s)}function d(e,t,s,c){u(c||document,t,function(t){for(var c,o=t.target||t.srcElement;o&&!(c=i(o,e));)o=o.parentElement;c&&s.call(o,t)})}}}();"function"==typeof define&&define.amd?define("autoComplete",function(){return autoComplete}):"undefined"!=typeof module&&module.exports?module.exports=autoComplete:window.autoComplete=autoComplete;